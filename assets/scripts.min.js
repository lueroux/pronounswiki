const modal=document.getElementById("myModal");const openModalBtn=document.getElementById("openModalBtn");const closeModal=document.getElementsByClassName("close")[0];const iframeContent=document.getElementById("iframeContent");openModalBtn.onclick=function(){modal.style.display="flex";iframeContent.src="https://pronouns.wiki/email-signature"};closeModal.onclick=function(){modal.style.display="none";iframeContent.src="about:blank"};window.onclick=function(event){if(event.target===modal){modal.style.display="none";iframeContent.src="about:blank"}};function toggleAccessibilityPanel(){document.querySelector(".accessibility-panel").classList.toggle("show")}
function toggleHighContrast(){document.body.classList.toggle("high-contrast")}
function applyColorScheme(e){document.body.classList.remove("scheme1","scheme2");document.body.classList.add("scheme"+e)}
function toggleBoldText(){document.body.classList.toggle("bold-text")}
function toggleDyslexiaFriendlyFont(){document.body.classList.toggle("dyslexia-friendly-font")}
function resetDefaults(){document.body.classList.remove("high-contrast","scheme1","scheme2","bold-text","dyslexia-friendly-font")}
const preloadedPages={};function preloadPage(url){if(!preloadedPages[url]){fetch(url).then((response)=>response.text()).then((html)=>{const parser=new DOMParser();const doc=parser.parseFromString(html,"text/html");const mainContent=doc.querySelector("main").innerHTML;preloadedPages[url]=mainContent}).catch((err)=>console.error("Failed to preload:",err))}}
function updateMainContent(event,url){event.preventDefault();if(preloadedPages[url]){document.getElementById("main-content").innerHTML=preloadedPages[url];window.history.pushState(null,"",url)}else{fetch(url).then((response)=>response.text()).then((html)=>{const parser=new DOMParser();const doc=parser.parseFromString(html,"text/html");document.getElementById("main-content").innerHTML=doc.querySelector("main").innerHTML;window.history.pushState(null,"",url)}).catch((err)=>console.error("Failed to load page:",err))}}
document.querySelectorAll(".internal-link").forEach((link)=>{const url=link.getAttribute("href");link.addEventListener("mouseover",()=>preloadPage(url));link.addEventListener("click",(event)=>updateMainContent(event,url))})